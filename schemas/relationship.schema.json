{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://bap.org/schemas/relationship.schema.json",
  "title": "BAP Anatomical Relationship",
  "description": "Schema for anatomical relationship definitions in the BAP ontology",
  
  "definitions": {
    "bap_id": {
      "type": "string",
      "pattern": "^BAP_[0-9]{7}$",
      "description": "BAP identifier in format BAP_XXXXXXX (7 digits)"
    },
    
    "predicate": {
      "type": "string",
      "enum": [
        "part_of",
        "has_part",
        "innervated_by",
        "innervates",
        "supplied_by",
        "supplies",
        "develops_from",
        "adjacent_to",
        "continuous_with",
        "attaches_to",
        "origin_of",
        "insertion_of"
      ],
      "description": "Relationship type"
    },
    
    "relationship": {
      "type": "object",
      "required": ["subject", "predicate", "object"],
      "properties": {
        "subject": {
          "$ref": "#/definitions/bap_id",
          "description": "Source structure ID"
        },
        "predicate": {
          "$ref": "#/definitions/predicate",
          "description": "Relationship type"
        },
        "object": {
          "$ref": "#/definitions/bap_id",
          "description": "Target structure ID"
        },
        "reference": {
          "type": "string",
          "description": "Citation (e.g., PMID:12345, DOI:10.1234/...)"
        },
        "notes": {
          "type": "string",
          "description": "Additional notes"
        },
        "confidence": {
          "type": "string",
          "enum": ["high", "medium", "low"],
          "description": "Confidence level"
        }
      },
      "additionalProperties": false
    }
  },
  
  "type": "object",
  "required": ["relationships"],
  "properties": {
    "metadata": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "enum": ["innervation", "blood_supply", "developmental", "spatial", "attachment"]
        },
        "description": {
          "type": "string"
        },
        "version": {
          "type": "string"
        },
        "last_modified": {
          "type": "string",
          "format": "date"
        }
      }
    },
    "relationships": {
      "type": "array",
      "items": { "$ref": "#/definitions/relationship" },
      "minItems": 0
    }
  },
  "additionalProperties": false
}
